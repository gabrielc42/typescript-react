(exports=>{
var Ee=Object.defineProperty;var ue=Object.assign,qe=e=>Ee(e,"__esModule",{value:!0});var Ke=(e,t)=>{for(var r in t)Ee(e,r,{get:t[r],enumerable:!0})};var ne=(e,t,r)=>new Promise((o,s)=>{var l=d=>{try{g(r.next(d))}catch(y){s(y)}},i=d=>{try{g(r.throw(d))}catch(y){s(y)}},g=d=>d.done?o(d.value):Promise.resolve(d.value).then(l,i);g((r=r.apply(e,t)).next())});qe(exports);Ke(exports,{build:()=>Qe,buildSync:()=>et,serve:()=>Xe,startService:()=>rt,transform:()=>Ye,transformSync:()=>tt,version:()=>Ge});function Re(e){let t=o=>{if(o===null)r.write8(0);else if(typeof o=="boolean")r.write8(1),r.write8(+o);else if(typeof o=="number")r.write8(2),r.write32(o|0);else if(typeof o=="string")r.write8(3),r.write(Z(o));else if(o instanceof Uint8Array)r.write8(4),r.write(o);else if(o instanceof Array){r.write8(5),r.write32(o.length);for(let s of o)t(s)}else{let s=Object.keys(o);r.write8(6),r.write32(s.length);for(let l of s)r.write(Z(l)),t(o[l])}},r=new we;return r.write32(0),r.write32(e.id<<1|+!e.isRequest),t(e.value),ve(r.buf,r.len-4,0),r.buf.subarray(0,r.len)}function $e(e){let t=()=>{switch(r.read8()){case 0:return null;case 1:return!!r.read8();case 2:return r.read32();case 3:return le(r.read());case 4:return r.read();case 5:{let i=r.read32(),g=[];for(let d=0;d<i;d++)g.push(t());return g}case 6:{let i=r.read32(),g={};for(let d=0;d<i;d++)g[le(r.read())]=t();return g}default:throw new Error("Invalid packet")}},r=new we(e),o=r.read32(),s=(o&1)==0;o>>>=1;let l=t();if(r.ptr!==e.length)throw new Error("Invalid packet");return{id:o,isRequest:s,value:l}}var we=class{constructor(t=new Uint8Array(1024)){this.buf=t;this.len=0;this.ptr=0}_write(t){if(this.len+t>this.buf.length){let r=new Uint8Array((this.len+t)*2);r.set(this.buf),this.buf=r}return this.len+=t,this.len-t}write8(t){let r=this._write(1);this.buf[r]=t}write32(t){let r=this._write(4);ve(this.buf,t,r)}write(t){let r=this._write(4+t.length);ve(this.buf,t.length,r),this.buf.set(t,r+4)}_read(t){if(this.ptr+t>this.buf.length)throw new Error("Invalid packet");return this.ptr+=t,this.ptr-t}read8(){return this.buf[this._read(1)]}read32(){return Oe(this.buf,this._read(4))}read(){let t=this.read32(),r=new Uint8Array(t),o=this._read(r.length);return r.set(this.buf.subarray(o,o+t)),r}},Z,le;if(typeof TextEncoder!="undefined"&&typeof TextDecoder!="undefined"){let e=new TextEncoder,t=new TextDecoder;Z=r=>e.encode(r),le=r=>t.decode(r)}else if(typeof Buffer!="undefined")Z=e=>{let t=Buffer.from(e);return t instanceof Uint8Array||(t=new Uint8Array(t)),t},le=e=>Buffer.from(e).toString();else throw new Error("No UTF-8 codec found");function Oe(e,t){return e[t++]|e[t++]<<8|e[t++]<<16|e[t++]<<24}function ve(e,t,r){e[r++]=t,e[r++]=t>>8,e[r++]=t>>16,e[r++]=t>>24}function Be(e){if(e+="",e.indexOf(",")>=0)throw new Error(`Invalid target: ${e}`);return e}var Se=()=>null,M=e=>typeof e=="boolean"?null:"a boolean",_e=e=>typeof e=="boolean"||typeof e=="object"&&!Array.isArray(e)?null:"a boolean or an object",m=e=>typeof e=="string"?null:"a string",Ie=e=>e instanceof RegExp?null:"a RegExp object",ce=e=>typeof e=="number"&&e===(e|0)?null:"an integer",xe=e=>typeof e=="function"?null:"a function",V=e=>Array.isArray(e)?null:"an array",ye=e=>typeof e=="object"&&e!==null&&!Array.isArray(e)?null:"an object",Ae=e=>typeof e=="object"&&!Array.isArray(e)?null:"an object or null",ke=e=>typeof e=="string"||typeof e=="boolean"?null:"a string or a boolean",Ve=e=>typeof e=="string"||typeof e=="object"&&e!==null&&!Array.isArray(e)?null:"a string or an object",Je=e=>typeof e=="string"||Array.isArray(e)?null:"a string or an array",ze=e=>typeof e=="string"||e instanceof Uint8Array?null:"a string or a Uint8Array";function n(e,t,r,o){let s=e[r];if(t[r+""]=!0,s===void 0)return;let l=o(s);if(l!==null)throw new Error(`"${r}" must be ${l}`);return s}function K(e,t,r){for(let o in e)if(!(o in t))throw new Error(`Invalid option ${r}: "${o}"`)}function Te(e){let t=Object.create(null),r=n(e,t,"wasmURL",m),o=n(e,t,"worker",M);return K(e,t,"in startService() call"),{wasmURL:r,worker:o}}function he(e,t,r,o,s){let l=n(t,r,"color",M),i=n(t,r,"logLevel",m),g=n(t,r,"errorLimit",ce);l?e.push(`--color=${l}`):o&&e.push("--color=true"),e.push(`--log-level=${i||s}`),e.push(`--error-limit=${g||0}`)}function Pe(e,t,r){let o=n(t,r,"sourcesContent",M),s=n(t,r,"target",Je),l=n(t,r,"format",m),i=n(t,r,"globalName",m),g=n(t,r,"minify",M),d=n(t,r,"minifySyntax",M),y=n(t,r,"minifyWhitespace",M),w=n(t,r,"minifyIdentifiers",M),F=n(t,r,"charset",m),B=n(t,r,"treeShaking",ke),$=n(t,r,"jsxFactory",m),D=n(t,r,"jsxFragment",m),C=n(t,r,"define",ye),z=n(t,r,"pure",V),X=n(t,r,"avoidTDZ",M),Y=n(t,r,"keepNames",M),H=n(t,r,"banner",m),p=n(t,r,"footer",m);if(o!==void 0&&e.push(`--sources-content=${o}`),s&&(Array.isArray(s)?e.push(`--target=${Array.from(s).map(Be).join(",")}`):e.push(`--target=${Be(s)}`)),l&&e.push(`--format=${l}`),i&&e.push(`--global-name=${i}`),g&&e.push("--minify"),d&&e.push("--minify-syntax"),y&&e.push("--minify-whitespace"),w&&e.push("--minify-identifiers"),F&&e.push(`--charset=${F}`),B!==void 0&&B!==!0&&e.push(`--tree-shaking=${B}`),$&&e.push(`--jsx-factory=${$}`),D&&e.push(`--jsx-fragment=${D}`),C)for(let u in C){if(u.indexOf("=")>=0)throw new Error(`Invalid define: ${u}`);e.push(`--define:${u}=${C[u]}`)}if(z)for(let u of z)e.push(`--pure:${u}`);X&&e.push("--avoid-tdz"),Y&&e.push("--keep-names"),H&&e.push(`--banner=${H}`),p&&e.push(`--footer=${p}`)}function Ze(e,t,r,o,s){var j;let l=[],i=Object.create(null),g=null,d=null,y=null;he(l,t,i,r,o),Pe(l,t,i);let w=n(t,i,"sourcemap",ke),F=n(t,i,"bundle",M),B=n(t,i,"watch",_e),$=n(t,i,"splitting",M),D=n(t,i,"preserveSymlinks",M),C=n(t,i,"metafile",m),z=n(t,i,"outfile",m),X=n(t,i,"outdir",m),Y=n(t,i,"outbase",m),H=n(t,i,"platform",m),p=n(t,i,"tsconfig",m),u=n(t,i,"resolveExtensions",V),c=n(t,i,"nodePaths",V),b=n(t,i,"mainFields",V),N=n(t,i,"external",V),U=n(t,i,"loader",ye),I=n(t,i,"outExtension",ye),P=n(t,i,"publicPath",m),A=n(t,i,"chunkNames",m),W=n(t,i,"assetNames",m),f=n(t,i,"inject",V),h=n(t,i,"entryPoints",V),S=n(t,i,"absWorkingDir",m),R=n(t,i,"stdin",ye),k=(j=n(t,i,"write",M))!=null?j:s,E=n(t,i,"incremental",M)===!0,v=n(t,i,"plugins",V);if(K(t,i,`in ${e}() call`),w&&l.push(`--sourcemap${w===!0?"":`=${w}`}`),F&&l.push("--bundle"),B)if(l.push("--watch"),typeof B=="boolean")y={};else{let a=Object.create(null),O=n(B,a,"onRebuild",xe);K(B,a,`on "watch" in ${e}() call`),y={onRebuild:O}}if($&&l.push("--splitting"),D&&l.push("--preserve-symlinks"),C&&l.push(`--metafile=${C}`),z&&l.push(`--outfile=${z}`),X&&l.push(`--outdir=${X}`),Y&&l.push(`--outbase=${Y}`),H&&l.push(`--platform=${H}`),p&&l.push(`--tsconfig=${p}`),u){let a=[];for(let O of u){if(O+="",O.indexOf(",")>=0)throw new Error(`Invalid resolve extension: ${O}`);a.push(O)}l.push(`--resolve-extensions=${a.join(",")}`)}if(P&&l.push(`--public-path=${P}`),A&&l.push(`--chunk-names=${A}`),W&&l.push(`--asset-names=${W}`),b){let a=[];for(let O of b){if(O+="",O.indexOf(",")>=0)throw new Error(`Invalid main field: ${O}`);a.push(O)}l.push(`--main-fields=${a.join(",")}`)}if(N)for(let a of N)l.push(`--external:${a}`);if(f)for(let a of f)l.push(`--inject:${a}`);if(U)for(let a in U){if(a.indexOf("=")>=0)throw new Error(`Invalid loader extension: ${a}`);l.push(`--loader:${a}=${U[a]}`)}if(I)for(let a in I){if(a.indexOf("=")>=0)throw new Error(`Invalid out extension: ${a}`);l.push(`--out-extension:${a}=${I[a]}`)}if(h)for(let a of h){if(a+="",a.startsWith("-"))throw new Error(`Invalid entry point: ${a}`);l.push(a)}if(R){let a=Object.create(null),O=n(R,a,"contents",m),T=n(R,a,"resolveDir",m),L=n(R,a,"sourcefile",m),_=n(R,a,"loader",m);K(R,a,'in "stdin" object'),L&&l.push(`--sourcefile=${L}`),_&&l.push(`--loader=${_}`),T&&(d=T+""),g=O?O+"":""}let x=[];if(c)for(let a of c)a+="",x.push(a);return{flags:l,write:k,plugins:v,stdinContents:g,stdinResolveDir:d,absWorkingDir:S,incremental:E,nodePaths:x,watch:y}}function He(e,t,r,o){let s=[],l=Object.create(null);he(s,t,l,r,o),Pe(s,t,l);let i=n(t,l,"sourcemap",ke),g=n(t,l,"tsconfigRaw",Ve),d=n(t,l,"sourcefile",m),y=n(t,l,"loader",m);return K(t,l,`in ${e}() call`),i&&s.push(`--sourcemap=${i===!0?"external":i}`),g&&s.push(`--tsconfig-raw=${typeof g=="string"?g:JSON.stringify(g)}`),d&&s.push(`--sourcefile=${d}`),y&&s.push(`--loader=${y}`),s}function Ue(e){let t=new Map,r=new Map,o=new Map,s=new Map,l=0,i=!1,g=0,d=0,y=new Uint8Array(16*1024),w=0,F=p=>{let u=w+p.length;if(u>y.length){let b=new Uint8Array(u*2);b.set(y),y=b}y.set(p,w),w+=p.length;let c=0;for(;c+4<=w;){let b=Oe(y,c);if(c+4+b>w)break;c+=4,X(y.slice(c,c+b)),c+=b}c>0&&(y.set(y.slice(c)),w-=c)},B=()=>{i=!0;for(let p of t.values())p("The service was stopped",null);t.clear();for(let p of s.values())p.onWait("The service was stopped");s.clear();for(let p of o.values())try{p(new Error("The service was stopped"),null)}catch(u){console.error(u)}o.clear()},$=(p,u,c)=>{if(i)return c("The service is no longer running",null);let b=g++;t.set(b,(N,U)=>{try{c(N,U)}finally{p&&p.unref()}}),p&&p.ref(),e.writeToStdin(Re({id:b,isRequest:!0,value:u}))},D=(p,u)=>{if(i)throw new Error("The service is no longer running");e.writeToStdin(Re({id:p,isRequest:!1,value:u}))},C=(p,u)=>ne(this,null,function*(){try{switch(u.command){case"ping":{D(p,{});break}case"resolve":{let c=r.get(u.key);c?D(p,yield c(u)):D(p,{});break}case"load":{let c=r.get(u.key);c?D(p,yield c(u)):D(p,{});break}case"serve-request":{let c=s.get(u.serveID);c&&c.onRequest&&c.onRequest(u.args),D(p,{});break}case"serve-wait":{let c=s.get(u.serveID);c&&c.onWait(u.error),D(p,{});break}case"watch-rebuild":{let c=o.get(u.watchID);try{c&&c(null,u.args)}catch(b){console.error(b)}D(p,{});break}default:throw new Error("Invalid command: "+u.command)}}catch(c){D(p,{errors:[fe(c,e,null,void 0)]})}}),z=!0,X=p=>{if(z){z=!1;let c=String.fromCharCode(...p);if(c!=="0.8.57")throw new Error(`Cannot start service: Host version "0.8.57" does not match binary version ${JSON.stringify(c)}`);return}let u=$e(p);if(u.isRequest)C(u.id,u.value);else{let c=t.get(u.id);t.delete(u.id),u.value.error?c(u.value.error,{}):c(null,u.value)}},Y=(p,u,c,b)=>{if(e.isSync)throw new Error("Cannot use plugins in synchronous API calls");let N={},U={},I=0,P=0;u.plugins=[];for(let f of p){let h={};if(typeof f!="object")throw new Error(`Plugin at index ${P} must be an object`);let S=n(f,h,"name",m),R=n(f,h,"setup",xe);if(typeof S!="string"||S==="")throw new Error(`Plugin at index ${P} is missing a name`);if(typeof R!="function")throw new Error(`[${S}] Plugin is missing a setup function`);K(f,h,`on plugin ${JSON.stringify(S)}`);let k={name:S,onResolve:[],onLoad:[]};P++,R({onResolve(E,v){let x='This error came from the "onResolve" callback registered here',j=je(new Error(x),e,"onResolve"),a={},O=n(E,a,"filter",Ie),T=n(E,a,"namespace",m);if(K(E,a,`in onResolve() call for plugin ${JSON.stringify(S)}`),O==null)throw new Error(`[${k.name}] onResolve() call is missing a filter`);let L=I++;N[L]={name:S,callback:v,note:j},k.onResolve.push({id:L,filter:O.source,namespace:T||""})},onLoad(E,v){let x='This error came from the "onLoad" callback registered here',j=je(new Error(x),e,"onLoad"),a={},O=n(E,a,"filter",Ie),T=n(E,a,"namespace",m);if(K(E,a,`in onLoad() call for plugin ${JSON.stringify(S)}`),O==null)throw new Error(`[${k.name}] onLoad() call is missing a filter`);let L=I++;U[L]={name:S,callback:v,note:j},k.onLoad.push({id:L,filter:O.source,namespace:T||""})}}),u.plugins.push(k)}let A=f=>ne(this,null,function*(){switch(f.command){case"resolve":{let h={},S,R,k;for(let E of f.ids)try{({name:S,callback:R,note:k}=N[E]);let v=yield R({path:f.path,importer:f.importer,namespace:f.namespace,resolveDir:f.resolveDir,kind:f.kind,pluginData:b.load(f.pluginData)});if(v!=null){if(typeof v!="object")throw new Error(`Expected onResolve() callback in plugin ${JSON.stringify(S)} to return an object`);let x={},j=n(v,x,"pluginName",m),a=n(v,x,"path",m),O=n(v,x,"namespace",m),T=n(v,x,"external",M),L=n(v,x,"pluginData",Se),_=n(v,x,"errors",V),J=n(v,x,"warnings",V);K(v,x,`from onResolve() callback in plugin ${JSON.stringify(S)}`),h.id=E,j!=null&&(h.pluginName=j),a!=null&&(h.path=a),O!=null&&(h.namespace=O),T!=null&&(h.external=T),L!=null&&(h.pluginData=b.store(L)),_!=null&&(h.errors=be(_,"errors",b)),J!=null&&(h.warnings=be(J,"warnings",b));break}}catch(v){return{id:E,errors:[fe(v,e,b,k)]}}return h}case"load":{let h={},S,R,k;for(let E of f.ids)try{({name:S,callback:R,note:k}=U[E]);let v=yield R({path:f.path,namespace:f.namespace,pluginData:b.load(f.pluginData)});if(v!=null){if(typeof v!="object")throw new Error(`Expected onLoad() callback in plugin ${JSON.stringify(S)} to return an object`);let x={},j=n(v,x,"pluginName",m),a=n(v,x,"contents",ze),O=n(v,x,"resolveDir",m),T=n(v,x,"pluginData",Se),L=n(v,x,"loader",m),_=n(v,x,"errors",V),J=n(v,x,"warnings",V);K(v,x,`from onLoad() callback in plugin ${JSON.stringify(S)}`),h.id=E,j!=null&&(h.pluginName=j),a instanceof Uint8Array?h.contents=a:a!=null&&(h.contents=Z(a)),O!=null&&(h.resolveDir=O),T!=null&&(h.pluginData=b.store(T)),L!=null&&(h.loader=L),_!=null&&(h.errors=be(_,"errors",b)),J!=null&&(h.warnings=be(J,"warnings",b));break}}catch(v){return{id:E,errors:[fe(v,e,b,k)]}}return h}default:throw new Error("Invalid command: "+f.command)}}),W=0;return{ref(){++W==1&&r.set(c,A)},unref(){--W==0&&r.delete(c)}}},H=(p,u,c)=>{let b={},N=n(u,b,"port",ce),U=n(u,b,"host",m),I=n(u,b,"servedir",m),P=n(u,b,"onRequest",xe),A=l++,W,f=new Promise((h,S)=>{W=R=>{s.delete(A),R!==null?S(new Error(R)):h()}});return c.serve={serveID:A},K(u,b,"in serve() call"),N!==void 0&&(c.serve.port=N),U!==void 0&&(c.serve.host=U),I!==void 0&&(c.serve.servedir=I),s.set(A,{onRequest:P,onWait:W}),{wait:f,stop(){$(p,{command:"serve-stop",serveID:A},()=>{})}}};return{readFromStdout:F,afterClose:B,service:{buildOrServe(p,u,c,b,N,U,I){let P,A=Fe(),W="info",f={ref(){P&&P.ref(),u&&u.ref()},unref(){P&&P.unref(),u&&u.unref()}};try{let h=d++,S=!e.isBrowser,{flags:R,write:k,plugins:E,stdinContents:v,stdinResolveDir:x,absWorkingDir:j,incremental:a,nodePaths:O,watch:T}=Ze(p,b,N,W,S),L={command:"build",key:h,flags:R,write:k,stdinContents:v,stdinResolveDir:x,absWorkingDir:j||U,incremental:a,nodePaths:O,hasOnRebuild:!!(T&&T.onRebuild)},_=c&&H(f,c,L);E&&E.length>0&&(P=Y(E,L,h,A));let J,pe,De=(q,ee)=>{let oe=ie(q.errors,A),se=ie(q.warnings,A);if(oe.length>0)return ee(de("Build failed",oe,se),null);let te={warnings:se};if(q.outputFiles&&(te.outputFiles=q.outputFiles.map(Le)),q.rebuildID!==void 0){if(!J){let re=!1;J=()=>new Promise((ge,G)=>{if(re||i)throw new Error("Cannot rebuild");$(f,{command:"rebuild",rebuildID:q.rebuildID},(ae,me)=>{if(ae)return ee(new Error(ae),null);De(me,(Q,Me)=>{Q?G(Q):ge(Me)})})}),f.ref(),J.dispose=()=>{re||(re=!0,$(f,{command:"rebuild-dispose",rebuildID:q.rebuildID},()=>{}),f.unref())}}te.rebuild=J}if(q.watchID!==void 0){if(!pe){let re=!1;f.ref(),pe=()=>{re||(re=!0,o.delete(q.watchID),$(f,{command:"watch-stop",watchID:q.watchID},()=>{}),f.unref())},T&&T.onRebuild&&o.set(q.watchID,(ge,G)=>{if(ge)return T.onRebuild(ge,null);let ae=ie(G.errors,A),me=ie(G.warnings,A);if(ae.length>0)return T.onRebuild(de("Build failed",ae,me),null);let Q={warnings:me};G.outputFiles&&(Q.outputFiles=G.outputFiles.map(Le)),G.rebuildID!==void 0&&(Q.rebuild=J),Q.stop=pe,T.onRebuild(null,Q)})}te.stop=pe}return ee(null,te)};if(k&&e.isBrowser)throw new Error('Cannot enable "write" in the browser');if(a&&e.isSync)throw new Error('Cannot use "incremental" with a synchronous build');$(f,L,(q,ee)=>{if(q)return I(new Error(q),null);if(_){let oe=ee,se=!1;f.ref();let te={port:oe.port,host:oe.host,wait:_.wait,stop(){se||(se=!0,_.stop(),f.unref())}};return f.ref(),_.wait.then(f.unref,f.unref),I(null,te)}return De(ee,I)})}catch(h){let S=[];try{he(S,b,{},N,W)}catch(k){}let R=fe(h,e,A,void 0);$(f,{command:"error",flags:S,error:R},()=>{R.detail=A.load(R.detail),I(de("Build failed",[R],[]),null)})}},transform(p,u,c,b,N,U,I){let P=Fe(),A="silent",W=f=>{try{let h=He(p,b,N,A);$(u,{command:"transform",flags:h,inputFS:f!==null,input:f!==null?f:c},(R,k)=>{if(R)return I(new Error(R),null);let E=ie(k.errors,P),v=ie(k.warnings,P),x=1,j=()=>--x==0&&I(null,{warnings:v,code:k.code,map:k.map});if(E.length>0)return I(de("Transform failed",E,v),null);k.codeFS&&(x++,U.readFile(k.code,(a,O)=>{a!==null?I(a,null):(k.code=O,j())})),k.mapFS&&(x++,U.readFile(k.map,(a,O)=>{a!==null?I(a,null):(k.map=O,j())})),j()})}catch(h){let S=[];try{he(S,b,{},N,A)}catch(k){}let R=fe(h,e,P,void 0);$(u,{command:"error",flags:S,error:R},()=>{R.detail=P.load(R.detail),I(de("Transform failed",[R],[]),null)})}};if(c.length>1024*1024){let f=W;W=()=>U.writeFile(c,f)}W(null)}}}}function Fe(){let e=new Map,t=0;return{load(r){return e.get(r)},store(r){if(r===void 0)return-1;let o=t++;return e.set(o,r),o}}}function je(e,t,r){try{let o=(e.stack+"").split(`
`,4);o.splice(1,1);let s=Ce(t,o,r);if(s)return{text:e.message,location:s}}catch(o){}}function fe(e,t,r,o){let s="Internal error",l=null;try{s=(e&&e.message||e)+""}catch(i){}try{l=Ce(t,(e.stack+"").split(`
`,3),"")}catch(i){}return{text:s,location:l,notes:o?[o]:[],detail:r?r.store(e):-1}}function Ce(e,t,r){let o="    at ";if(e.readFileSync&&!t[0].startsWith(o)&&t[1].startsWith(o)){let s=t[1].slice(o.length);for(;;){let l=/^\S+ \((.*)\)$/.exec(s);if(l){s=l[1];continue}if(l=/^eval at \S+ \((.*)\)(?:, \S+:\d+:\d+)?$/.exec(s),l){s=l[1];continue}if(l=/^(\S+):(\d+):(\d+)$/.exec(s),l){let g=e.readFileSync(l[1],"utf8").split(/\r\n|\r|\n|\u2028|\u2029/)[+l[2]-1]||"",d=+l[3]-1,y=g.slice(d,d+r.length)===r?r.length:0;return{file:l[1],namespace:"file",line:+l[2],column:Z(g.slice(0,d)).length,length:Z(g.slice(d,d+y)).length,lineText:g+`
`+t.slice(1).join(`
`)}}break}}return null}function de(e,t,r){let o=5,s=t.length<1?"":` with ${t.length} error${t.length<2?"":"s"}:`+t.slice(0,o+1).map((i,g)=>{if(g===o)return`
...`;if(!i.location)return`
error: ${i.text}`;let{file:d,line:y,column:w}=i.location;return`
${d}:${y}:${w}: error: ${i.text}`}).join(""),l=new Error(`${e}${s}`);return l.errors=t,l.warnings=r,l}function ie(e,t){for(let r of e)r.detail=t.load(r.detail);return e}function Ne(e,t){if(e==null)return null;let r={},o=n(e,r,"file",m),s=n(e,r,"namespace",m),l=n(e,r,"line",ce),i=n(e,r,"column",ce),g=n(e,r,"length",ce),d=n(e,r,"lineText",m);return K(e,r,t),{file:o||"",namespace:s||"",line:l||0,column:i||0,length:g||0,lineText:d||""}}function be(e,t,r){let o=[],s=0;for(let l of e){let i={},g=n(l,i,"text",m),d=n(l,i,"location",Ae),y=n(l,i,"notes",V),w=n(l,i,"detail",Se),F=`in element ${s} of "${t}"`;K(l,i,F);let B=[];if(y)for(let $ of y){let D={},C=n($,D,"text",m),z=n($,D,"location",Ae);K($,D,F),B.push({text:C||"",location:Ne(z,F)})}o.push({text:g||"",location:Ne(d,F),notes:B,detail:r.store(w)}),s++}return o}function Le({path:e,contents:t}){let r=null;return{path:e,contents:t,get text(){return r===null&&(r=le(t)),r}}}function We(e,t){let r=new Map;return o=>ne(this,null,function*(){let s=e(),l=JSON.stringify(o||{}),i=l,g=r.get(i);g===void 0&&(g=t(JSON.parse(l)),r.set(i,g));try{let d=yield g;return{build:(y={})=>(s&&(y.absWorkingDir||(y=ue(ue({},y),{absWorkingDir:s}))),d.build(y)),serve(y,w={}){return s&&(w.absWorkingDir||(w=ue(ue({},w),{absWorkingDir:s}))),d.serve(y,w)},transform(y,w){return d.transform(y,w)},stop(){}}}catch(d){throw r.delete(i),d}})}var Ge="0.8.57",Qe=()=>{throw new Error('The "build" API only works in node')},Xe=()=>{throw new Error('The "serve" API only works in node')},Ye=()=>{throw new Error('The "transform" API only works in node')},et=()=>{throw new Error('The "buildSync" API only works in node')},tt=()=>{throw new Error('The "transformSync" API only works in node')},rt=We(()=>"",e=>ne(void 0,null,function*(){if(!e)throw new Error('Must provide an options object to "startService"');e=Te(e);let t=e.wasmURL,r=e.worker!==!1;if(!t)throw new Error('Must provide the "wasmURL" option');t+="";let o=yield fetch(t);if(!o.ok)throw new Error(`Failed to download ${JSON.stringify(t)}`);let s=yield o.arrayBuffer(),l='{let global={};for(let o=self;o;o=Object.getPrototypeOf(o))for(let k of Object.getOwnPropertyNames(o))if(!(k in global))Object.defineProperty(global,k,{get:()=>self[k]});\n// Copyright 2018 The Go Authors. All rights reserved.\n// Use of this source code is governed by a BSD-style\n// license that can be found in the LICENSE file.\nvar y=(l,g,d)=>new Promise((r,n)=>{var s=m=>{try{o(d.next(m))}catch(u){n(u)}},i=m=>{try{o(d.throw(m))}catch(u){n(u)}},o=m=>m.done?r(m.value):Promise.resolve(m.value).then(s,i);o((d=d.apply(l,g)).next())});(()=>{if(typeof global=="undefined")if(typeof window!="undefined")window.global=window;else if(typeof self!="undefined")self.global=self;else throw new Error("cannot export Go (neither global, window nor self is defined)");if(!global.require&&typeof require!="undefined"&&(global.require=require),!global.fs&&global.require){const r=require("fs");typeof r=="object"&&r!==null&&Object.keys(r).length!==0&&(global.fs=Object.assign({},r,{write(n,s,i,o,m,u){if(i===0&&o===s.length&&m===null){if(n===process.stdout.fd){try{process.stdout.write(s,h=>h?u(h,0,null):u(null,o,s))}catch(h){u(h,0,null)}return}if(n===process.stderr.fd){try{process.stderr.write(s,h=>h?u(h,0,null):u(null,o,s))}catch(h){u(h,0,null)}return}}r.write(n,s,i,o,m,u)}}))}const l=()=>{const r=new Error("not implemented");return r.code="ENOSYS",r};if(!global.fs){let r="";global.fs={constants:{O_WRONLY:-1,O_RDWR:-1,O_CREAT:-1,O_TRUNC:-1,O_APPEND:-1,O_EXCL:-1},writeSync(n,s){r+=d.decode(s);const i=r.lastIndexOf(`\n`);return i!=-1&&(console.log(r.substr(0,i)),r=r.substr(i+1)),s.length},write(n,s,i,o,m,u){if(i!==0||o!==s.length||m!==null){u(l());return}const h=this.writeSync(n,s);u(null,h)},chmod(n,s,i){i(l())},chown(n,s,i,o){o(l())},close(n,s){s(l())},fchmod(n,s,i){i(l())},fchown(n,s,i,o){o(l())},fstat(n,s){s(l())},fsync(n,s){s(null)},ftruncate(n,s,i){i(l())},lchown(n,s,i,o){o(l())},link(n,s,i){i(l())},lstat(n,s){s(l())},mkdir(n,s,i){i(l())},open(n,s,i,o){o(l())},read(n,s,i,o,m,u){u(l())},readdir(n,s){s(l())},readlink(n,s){s(l())},rename(n,s,i){i(l())},rmdir(n,s){s(l())},stat(n,s){s(l())},symlink(n,s,i){i(l())},truncate(n,s,i){i(l())},unlink(n,s){s(l())},utimes(n,s,i,o){o(l())}}}if(global.process||(global.process={getuid(){return-1},getgid(){return-1},geteuid(){return-1},getegid(){return-1},getgroups(){throw l()},pid:-1,ppid:-1,umask(){throw l()},cwd(){throw l()},chdir(){throw l()}}),!global.crypto&&global.require){const r=require("crypto");global.crypto={getRandomValues(n){r.randomFillSync(n)}}}if(!global.crypto)throw new Error("global.crypto is not available, polyfill required (getRandomValues only)");if(global.performance||(global.performance={now(){const[r,n]=process.hrtime();return r*1e3+n/1e6}}),!global.TextEncoder&&global.require&&(global.TextEncoder=require("util").TextEncoder),!global.TextEncoder)throw new Error("global.TextEncoder is not available, polyfill required");if(!global.TextDecoder&&global.require&&(global.TextDecoder=require("util").TextDecoder),!global.TextDecoder)throw new Error("global.TextDecoder is not available, polyfill required");const g=new TextEncoder("utf-8"),d=new TextDecoder("utf-8");if(global.Go=class{constructor(){this.argv=["js"],this.env={},this.exit=e=>{e!==0&&console.warn("exit code:",e)},this._exitPromise=new Promise(e=>{this._resolveExitPromise=e}),this._pendingEvent=null,this._scheduledTimeouts=new Map,this._nextCallbackTimeoutID=1;const r=(e,t)=>{this.mem.setUint32(e+0,t,!0),this.mem.setUint32(e+4,Math.floor(t/4294967296),!0)},n=e=>{const t=this.mem.getUint32(e+0,!0),a=this.mem.getInt32(e+4,!0);return t+a*4294967296},s=e=>{const t=this.mem.getFloat64(e,!0);if(t===0)return;if(!isNaN(t))return t;const a=this.mem.getUint32(e,!0);return this._values[a]},i=(e,t)=>{const a=2146959360;if(typeof t=="number"&&t!==0){if(isNaN(t)){this.mem.setUint32(e+4,a,!0),this.mem.setUint32(e,0,!0);return}this.mem.setFloat64(e,t,!0);return}if(t===void 0){this.mem.setFloat64(e,0,!0);return}let c=this._ids.get(t);c===void 0&&(c=this._idPool.pop(),c===void 0&&(c=this._values.length),this._values[c]=t,this._goRefCounts[c]=0,this._ids.set(t,c)),this._goRefCounts[c]++;let f=0;switch(typeof t){case"object":t!==null&&(f=1);break;case"string":f=2;break;case"symbol":f=3;break;case"function":f=4;break}this.mem.setUint32(e+4,a|f,!0),this.mem.setUint32(e,c,!0)},o=e=>{const t=n(e+0),a=n(e+8);return new Uint8Array(this._inst.exports.mem.buffer,t,a)},m=e=>{const t=n(e+0),a=n(e+8),c=new Array(a);for(let f=0;f<a;f++)c[f]=s(t+f*8);return c},u=e=>{const t=n(e+0),a=n(e+8);return d.decode(new DataView(this._inst.exports.mem.buffer,t,a))},h=Date.now()-performance.now();this.importObject={go:{"runtime.wasmExit":e=>{e>>>=0;const t=this.mem.getInt32(e+8,!0);this.exited=!0,delete this._inst,delete this._values,delete this._goRefCounts,delete this._ids,delete this._idPool,this.exit(t)},"runtime.wasmWrite":e=>{e>>>=0;const t=n(e+8),a=n(e+16),c=this.mem.getInt32(e+24,!0);fs.writeSync(t,new Uint8Array(this._inst.exports.mem.buffer,a,c))},"runtime.resetMemoryDataView":e=>{e>>>=0,this.mem=new DataView(this._inst.exports.mem.buffer)},"runtime.nanotime1":e=>{e>>>=0,r(e+8,(h+performance.now())*1e6)},"runtime.walltime1":e=>{e>>>=0;const t=new Date().getTime();r(e+8,t/1e3),this.mem.setInt32(e+16,t%1e3*1e6,!0)},"runtime.scheduleTimeoutEvent":e=>{e>>>=0;const t=this._nextCallbackTimeoutID;this._nextCallbackTimeoutID++,this._scheduledTimeouts.set(t,setTimeout(()=>{for(this._resume();this._scheduledTimeouts.has(t);)console.warn("scheduleTimeoutEvent: missed timeout event"),this._resume()},n(e+8)+1)),this.mem.setInt32(e+16,t,!0)},"runtime.clearTimeoutEvent":e=>{e>>>=0;const t=this.mem.getInt32(e+8,!0);clearTimeout(this._scheduledTimeouts.get(t)),this._scheduledTimeouts.delete(t)},"runtime.getRandomData":e=>{e>>>=0,crypto.getRandomValues(o(e+8))},"syscall/js.finalizeRef":e=>{e>>>=0;const t=this.mem.getUint32(e+8,!0);if(this._goRefCounts[t]--,this._goRefCounts[t]===0){const a=this._values[t];this._values[t]=null,this._ids.delete(a),this._idPool.push(t)}},"syscall/js.stringVal":e=>{e>>>=0,i(e+24,u(e+8))},"syscall/js.valueGet":e=>{e>>>=0;const t=Reflect.get(s(e+8),u(e+16));e=this._inst.exports.getsp()>>>0,i(e+32,t)},"syscall/js.valueSet":e=>{e>>>=0,Reflect.set(s(e+8),u(e+16),s(e+32))},"syscall/js.valueDelete":e=>{e>>>=0,Reflect.deleteProperty(s(e+8),u(e+16))},"syscall/js.valueIndex":e=>{e>>>=0,i(e+24,Reflect.get(s(e+8),n(e+16)))},"syscall/js.valueSetIndex":e=>{e>>>=0,Reflect.set(s(e+8),n(e+16),s(e+24))},"syscall/js.valueCall":e=>{e>>>=0;try{const t=s(e+8),a=Reflect.get(t,u(e+16)),c=m(e+32),f=Reflect.apply(a,t,c);e=this._inst.exports.getsp()>>>0,i(e+56,f),this.mem.setUint8(e+64,1)}catch(t){i(e+56,t),this.mem.setUint8(e+64,0)}},"syscall/js.valueInvoke":e=>{e>>>=0;try{const t=s(e+8),a=m(e+16),c=Reflect.apply(t,void 0,a);e=this._inst.exports.getsp()>>>0,i(e+40,c),this.mem.setUint8(e+48,1)}catch(t){i(e+40,t),this.mem.setUint8(e+48,0)}},"syscall/js.valueNew":e=>{e>>>=0;try{const t=s(e+8),a=m(e+16),c=Reflect.construct(t,a);e=this._inst.exports.getsp()>>>0,i(e+40,c),this.mem.setUint8(e+48,1)}catch(t){i(e+40,t),this.mem.setUint8(e+48,0)}},"syscall/js.valueLength":e=>{e>>>=0,r(e+16,parseInt(s(e+8).length))},"syscall/js.valuePrepareString":e=>{e>>>=0;const t=g.encode(String(s(e+8)));i(e+16,t),r(e+24,t.length)},"syscall/js.valueLoadString":e=>{e>>>=0;const t=s(e+8);o(e+16).set(t)},"syscall/js.valueInstanceOf":e=>{e>>>=0,this.mem.setUint8(e+24,s(e+8)instanceof s(e+16)?1:0)},"syscall/js.copyBytesToGo":e=>{e>>>=0;const t=o(e+8),a=s(e+32);if(!(a instanceof Uint8Array||a instanceof Uint8ClampedArray)){this.mem.setUint8(e+48,0);return}const c=a.subarray(0,t.length);t.set(c),r(e+40,c.length),this.mem.setUint8(e+48,1)},"syscall/js.copyBytesToJS":e=>{e>>>=0;const t=s(e+8),a=o(e+16);if(!(t instanceof Uint8Array||t instanceof Uint8ClampedArray)){this.mem.setUint8(e+48,0);return}const c=a.subarray(0,t.length);t.set(c),r(e+40,c.length),this.mem.setUint8(e+48,1)},debug:e=>{console.log(e)}}}}run(r){return y(this,null,function*(){if(!(r instanceof WebAssembly.Instance))throw new Error("Go.run: WebAssembly.Instance expected");this._inst=r,this.mem=new DataView(this._inst.exports.mem.buffer),this._values=[NaN,0,null,!0,!1,global,this],this._goRefCounts=new Array(this._values.length).fill(Infinity),this._ids=new Map([[0,1],[null,2],[!0,3],[!1,4],[global,5],[this,6]]),this._idPool=[],this.exited=!1;let n=4096;const s=h=>{const e=n,t=g.encode(h+"\\0");return new Uint8Array(this.mem.buffer,n,t.length).set(t),n+=t.length,n%8!=0&&(n+=8-n%8),e},i=this.argv.length,o=[];this.argv.forEach(h=>{o.push(s(h))}),o.push(0),Object.keys(this.env).sort().forEach(h=>{o.push(s(`${h}=${this.env[h]}`))}),o.push(0);const u=n;o.forEach(h=>{this.mem.setUint32(n,h,!0),this.mem.setUint32(n+4,0,!0),n+=8}),this._inst.exports.run(i,u),this.exited&&this._resolveExitPromise(),yield this._exitPromise})}_resume(){if(this.exited)throw new Error("Go program has already exited");this._inst.exports.resume(),this.exited&&this._resolveExitPromise()}_makeFuncWrapper(r){const n=this;return function(){const s={id:r,this:this,args:arguments};return n._pendingEvent=s,n._resume(),s.result}}},typeof module!="undefined"&&global.require&&global.require.main===module&&global.process&&global.process.versions&&!global.process.versions.electron){process.argv.length<3&&(console.error("usage: go_js_wasm_exec [wasm binary] [arguments]"),process.exit(1));const r=new Go;r.argv=process.argv.slice(2),r.env=Object.assign({TMPDIR:require("os").tmpdir()},process.env),r.exit=process.exit,WebAssembly.instantiate(fs.readFileSync(process.argv[2]),r.importObject).then(n=>(process.on("exit",s=>{s===0&&!r.exited&&(r._pendingEvent={id:0},r._resume())}),r.run(n.instance))).catch(n=>{console.error(n),process.exit(1)})}})();\nonmessage=({data:c})=>{let y=new TextDecoder,s=global.fs,a="";s.writeSync=(e,t)=>{if(e===1)postMessage(t);else if(e===2){a+=y.decode(t);let n=a.split(`\n`);n.length>1&&console.log(n.slice(0,-1).join(`\n`)),a=n[n.length-1]}else throw new Error("Bad write");return t.length};let l=[],i,r=0;onmessage=({data:e})=>{e.length>0&&(l.push(e),i&&i())},s.read=(e,t,n,d,h,m)=>{if(e!==0||n!==0||d!==t.length||h!==null)throw new Error("Bad read");if(l.length===0){i=()=>s.read(e,t,n,d,h,m);return}let g=l[0],u=Math.max(0,Math.min(d,g.length-r));t.set(g.subarray(r,r+u),n),r+=u,r===g.length&&(l.shift(),r=0),m(null,u)};let o=new global.Go;o.argv=["","--service=0.8.57"],WebAssembly.instantiate(c,o.importObject).then(({instance:e})=>o.run(e))};}',i;if(r){let w=new Blob([l],{type:"text/javascript"});i=new Worker(URL.createObjectURL(w))}else{let F=new Function("postMessage",l+"var onmessage; return m => onmessage(m)")(B=>i.onmessage({data:B}));i={onmessage:null,postMessage:B=>F({data:B}),terminate(){}}}i.postMessage(s),i.onmessage=({data:w})=>g(w);let{readFromStdout:g,afterClose:d,service:y}=Ue({writeToStdin(w){i.postMessage(w)},isSync:!1,isBrowser:!0});return{build:w=>new Promise((F,B)=>y.buildOrServe("build",null,null,w,!1,"/",($,D)=>$?B($):F(D))),transform:(w,F)=>(w+="",new Promise((B,$)=>y.transform("transform",null,w,F||{},!1,{readFile(D,C){C(new Error("Internal error"),null)},writeFile(D,C){C(null)}},(D,C)=>D?$(D):B(C)))),serve(){throw new Error('The "serve" API only works in node')},buildSync(){throw new Error('The "buildSync" API only works in node')},transformSync(){throw new Error('The "transformSync" API only works in node')},stop(){i.terminate(),d()}}}));
})(typeof exports==="object"?exports:(typeof self!=="undefined"?self:this).esbuild={});
